var foc=!0,dataC=[],stop=!0,cap=[],userArr=[],postArr=[],accUsed=1,comm_sendArr=[],coms_betweenCap=[],comm_send=0,banArr=[],capsArr=[],timing=5,theme="white",sound="def",capt=[],settings=!1;$("#hidden").hide();var audio1=new Audio;audio1.preload="auto";audio1.src="/yoursound.wav";if(getCookie("tokens")){var json=getCookie("tokens").replace("+","");json=JSON.parse(decodeURIComponent(json));var q=json.length;for(i=0;i<q;i++)addAcc(json[i])}getCookie("rucaptcha")&&$("input[name='rucaptcha']").val(getCookie("rucaptcha"));
getCookie("theme")&&setTheme(getCookie("theme"));getCookie("timing")&&setTiming(getCookie("timing"));
function clearThemes(){"black"===theme?($("body").removeClass("black"),$(".panel").removeClass("black")):"pink"===theme?($("body").removeClass("pink"),$(".panel").removeClass("pink")):"blue"===theme?($("body").removeClass("blue"),$(".panel").removeClass("blue")):"yellow"===theme?($("body").removeClass("yellow"),$(".panel").removeClass("yellow")):"gay"===theme?($("body").removeClass("gay"),$(".panel").removeClass("gay")):"russia"===theme?($("body").removeClass("russia"),$(".panel").removeClass("russia")):
"ukraine"===theme?($("body").removeClass("ukraine"),$(".panel").removeClass("ukraine")):"belarus"===theme&&($("body").removeClass("belarus"),$(".panel").removeClass("belarus"));theme="white"}function setTheme(b){clearThemes();$("body").addClass(b);$(".panel").addClass(b);theme=b}
function saveTokens(){for(var b=[],a=1;a<accUsed+1;a++)b[b.length]=$("input[name='token"+a+"']").val();b=JSON.stringify(b);a=$("input[name='rucaptcha']").val();setCookie("tokens",b,{expires:2147483647});setCookie("rucaptcha",a,{expires:2147483647});setCookie("theme",theme,{expires:2147483647});setCookie("timing",timing,{expires:2147483647});$.get("save.php",void 0,function(){})}
function addAcc(b){b=void 0===b?"":b;if(1===accUsed&&""!==b&&""===$("input[name=token1]").val())$("input[name=token1]").val(b);else{accUsed++;var a=accUsed-1;$("tr:contains('\u0410\u043a\u043a\u0430\u0443\u043d\u0442 "+a+"')").after('<tr><td><p class="control-label">\u0410\u043a\u043a\u0430\u0443\u043d\u0442 '+accUsed+' (<a href="https://oauth.vk.com/authorize?client_id=2685278&redirect_uri=https://api.vk.com/blank.html&display=page&scope=offline%2Cfriends&response_type=token" target="_blank">\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0442\u043e\u043a\u0435\u043d</a>)</p><input type="text" name="token'+
accUsed+'" class="form-control" placeholder="\u043e\u0442 = \u0434\u043e &" value="'+b+'"></td><td><p class="control-label">\u0421\u0441\u044b\u043b\u043a\u0430</p><input type="text" name="url'+accUsed+'" class="form-control" placeholder="vk.com/wall-1_1"></td></tr>');$("#infoust"+a).after('<div id="infoust'+accUsed+'"></div>');$("#log"+a).after('<div id="log'+accUsed+'"></div>')}}
function addPass(){$("#auth").html('<p>\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d \u0412\u041a</p><br><input id="login"><br><p>\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c \u0412\u041a</p><br><input id="password" type="password"><br><button type="button" id="addVK" class="btn btn-danger btn-raised">\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0430\u043a\u043a\u0430\u0443\u043d\u0442</button>');$("#addVK").click(function(){var b=
$("#login").val(),a=$("#password").val();$.get("get_token.php",{login:b,password:a},function(a){addAcc(a);$("#auth").empty()})})}function setTiming(b){b="undefined"==typeof b?+$("#timing").val():b;$("#timing").val(b);if(0>b)return alert("\u041d\u0435\u0432\u0435\u0440\u043d\u0430\u044f \u0437\u0430\u0434\u0435\u0440\u0436\u043a\u0430!");timing=b}
function delAcc(){1<accUsed&&($("tr:contains('\u0410\u043a\u043a\u0430\u0443\u043d\u0442 "+accUsed+"')").remove(),$("#infoust"+accUsed).remove(),$("#log"+accUsed).remove(),accUsed--)}
function changeDataM(){var b=$("#mess").val();if(""!==b)try{dataC=b=JSON.parse(b)}catch(a){showNot("\u041e\u0448\u0438\u0431\u043a\u0430!","\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435. \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435, \u0447\u0442\u043e \u043c\u0430\u0441\u0441\u0438\u0432 \u0438\u043c\u0435\u0435\u0442 \u043a\u0432\u0430\u0434\u0440\u0430\u0442\u043d\u044b\u0435 \u0441\u043a\u043e\u0431\u043a\u0438 \u0432 \u043d\u0430\u0447\u0430\u043b\u0435 \u0438 \u0432 \u043a\u043e\u043d\u0446\u0435, \u0430 \u0442\u0430\u043a \u0436\u0435 \u0443\u0431\u0435\u0434\u0438\u0442\u0435\u0441\u044c, \u0447\u0442\u043e \u043c\u0435\u0436\u0434\u0443 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430\u043c\u0438 \u0435\u0441\u0442\u044c \u0437\u0430\u043f\u044f\u0442\u044b\u0435!","error",
"danger",1)}}function showNot(b,a,c,d,e){document.getElementById("infoust"+e).innerHTML='<div class="alert alert-dismissable alert-'+d+'" style="visibility: visible; opacity: 1; display: block; transform: translateY(0px);"><i class="fa fa-check"></i>&nbsp; <strong>'+b+"</strong> "+a+"</div>"}
function setButton(){if(stop)for(saveTokens(),""!==$("input[name=rucaptcha]").val()&&checkBall(),comm_send=0,$("#work").text("\u0421\u0442\u043e\u043f!"),changeDataM(),stop=!1,userArr=[],postArr=[],goal=$("#goal").val(),i=1;i<=accUsed;i++){var b=$("input[name='url"+i+"']").val(),a=$("input[name='token"+i+"']").val();-1<a.indexOf("=")&&(a=a.split("access_token=")[1].split("&")[0],$("input[name='token"+i+"']").val(a));if(""===a)showNot("\u041e\u0448\u0438\u0431\u043a\u0430!","\u0422\u043e\u043a\u0435\u043d \u0434\u043b\u044f \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430 "+
i+" \u043d\u0435 \u0437\u0430\u0434\u0430\u043d!","error","danger",i);else if(""===b&&"undefined"==typeof userArr[0]&&"undefined"==typeof postArr[0])showNot("\u041e\u0448\u0438\u0431\u043a\u0430!","\u0421\u0441\u044b\u043b\u043a\u0430 \u0434\u043b\u044f \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430 "+i+" \u043d\u0435 \u0437\u0430\u0434\u0430\u043d\u0430!","error","danger",i);else{if(""!==b)try{-1<b.indexOf("?hash")&&(b=b.split("?hash")[0]),b=b.split("wall")[1].split("_"),userArr[userArr.length]=
b[0],postArr[postArr.length]=b[1]}catch(c){showNot("\u041e\u0448\u0438\u0431\u043a\u0430!","\u0421\u0441\u044b\u043b\u043a\u0430 \u0434\u043b\u044f \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430 "+i+" \u043d\u0435 \u0432\u0435\u0440\u043d\u0430!","error","danger",i);continue}else userArr[userArr.length]=userArr[0],postArr[postArr.length]=postArr[0];coms_betweenCap[i]=0;comm_sendArr[i]=0;capsArr[i]=0;banArr[i]=0;window.eval("function checkFri"+i+"(data){checkFri(data, "+i+")}");cap[i-1]=!1;checkFriends(a,
i)}}else stop=!0,$("#work").text("\u041f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435.."),$("#work").prop("disabled",!0),setTimeout(function(){$("#work").text("\u041d\u0430\u0447\u0430\u0442\u044c!");$("#work").prop("disabled",!1)},1E3*timing)}function addScript(b,a,c){var d=document.createElement("script");d.src="https://api.vk.com/method/execute?code="+encodeURIComponent(b)+"&access_token="+a+"&callback=checkFri"+c+"&v=5.69";document.head.appendChild(d)}
function checkBall(){var b=$("input[name=rucaptcha]").val();$.post("get_ballance.php",{key:b},function(a){$("#ballance").html("<p>\u0411\u0430\u043b\u0430\u043d\u0441 \u0440\u0443\u043a\u0430\u043f\u0447\u0438: "+a+"</p>")})}
function checkFriends(b,a){if(!cap[a]&&!stop){var c=$("input[name='stic']").val();0===dataC.length?addScript('API.wall.createComment({"owner_id":'+userArr[a-1]+', "post_id":'+postArr[a-1]+', "sticker_id":'+c+'});return API.wall.getComments({"owner_id":'+userArr[a-1]+', "post_id":'+postArr[a-1]+"}).count;",b,a):(c=Math.floor(Math.random()*dataC.length),addScript('API.wall.createComment({"owner_id":'+userArr[a-1]+', "post_id":'+postArr[a-1]+', "message": "'+("object"==typeof dataC[c]?dataC[c].comment:
dataC[c])+'"});return API.wall.getComments({"owner_id":'+userArr[a-1]+', "post_id":'+postArr[a-1]+"}).count;",b,a))}stop||setTimeout(function(){checkFriends(b,a)},1E3*timing+100*Math.random())}
function checkFri(b,a){if(!stop)if(b.error)if(14===b.error.error_code){cap[a]=!0;capsArr[a]++;5>coms_betweenCap[a]&&0<coms_betweenCap[a]?banArr[a]++:5<coms_betweenCap[a]&&(banArr[a]=0);coms_betweenCap[a]=0;var c=$("input[name='rucaptcha']").val();if(""===c||null==c){"def"===sound&&audio1.play();$("input[name='captext']").val();var d=$("input[name='stic']").val();document.getElementById("infoust"+a).innerHTML='<form onsubmit="sendCapKnop('+userArr[a-1]+","+postArr[a-1]+","+d+","+b.error.captcha_sid+
", "+a+'); return false;"><div align="center" style="width: 50%;"><p>\u041a\u0430\u043f\u0447\u0430 \u0434\u043b\u044f \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430 '+a+'</p><br><img id="img" src="'+b.error.captcha_img+'" alt="\u043a\u0430\u043f\u0442\u0447\u0430"><input type="text" onfocus="foc = false;" autocomplete="off" name="captext'+a+'" class="form-control" placeholder="\u0442\u043e\u043a\u0435\u043d"><button type="submit" class="btn btn-danger btn-raised" >\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043a\u0430\u043f\u0447\u0443!</button></div></form>';
foc&&$("input[name='captext"+a+"']").focus()}else d=$("input[name='stic']").val(),c=$("input[name='rucaptcha']").val(),window.capt[a]={sticker:d,sid:b.error.captcha_sid},$.get("capt.php",{url:encodeURIComponent(b.error.captcha_img),key:c},function(b){onAjaxSuccess(b,a)})}else 15===b.error.error_code?(showNot("\u041e\u0448\u0438\u0431\u043a\u0430 15!","\u0422\u043e\u043a\u0435\u043d \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430 "+a+" \u0443\u0441\u0442\u0430\u0440\u0435\u043b. (\u0412\u0430\u043c \u043d\u0443\u0436\u043d\u043e \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0442\u043e\u043a\u0435\u043d)",
"error","danger",a),cap[a]=!0):5===b.error.error_code?(showNot("\u041e\u0448\u0438\u0431\u043a\u0430 5!","\u0422\u043e\u043a\u0435\u043d \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430 "+a+" \u0443\u0441\u0442\u0430\u0440\u0435\u043b. (\u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u0430\u043a\u043a\u0430\u0443\u043d\u0442 \u0437\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u043d)","error","danger",a),cap[a]=!0):document.getElementById("infoust"+a).innerHTML="\u041e\u0448\u0438\u0431\u043a\u0430 "+
b.error.error_code+"! \u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0440\u0430\u0431\u043e\u0442\u0435 \u0441 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u043e\u043c "+a+". \u041e\u0431\u0440\u0430\u0442\u0438\u0442\u0435\u0441\u044c \u043a \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0443 \u0437\u0430 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u043c\u0438 \u0440\u0430\u0437\u044a\u044f\u0441\u043d\u0435\u043d\u0438\u044f\u043c\u0438.";
else 1<banArr[a]&&(document.getElementById("infoust"+a).innerHTML="<p>\u0421\u043f\u0430\u043c \u0441 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430 "+a+" \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e \u043e\u0442\u043a\u043b\u044e\u0447\u0435\u043d. (\u041f\u0440\u0438\u0447\u0438\u043d\u0430: \u043b\u0438\u043c\u0438\u0442)</p>",cap[a]=!0),comm_sendArr[a]++,comm_send++,$("#total").html("<p>\u0412\u0441\u0435\u0433\u043e \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u043b\u0438: "+comm_send+"</p>"),
$("#log"+a).html("<p>\u0421 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430 "+a+": "+comm_sendArr[a]+"</p>"),coms_betweenCap[a]++,count=b.response,$("#total_post").html("<p>\u0412\u0441\u0435\u0433\u043e \u043d\u0430 \u043f\u043e\u0441\u0442\u0435: "+count+"</p>"),$("#total_str").html("<p>\u0427\u0443\u0436\u0438\u0445 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0435\u0432: "+(count-comm_send)+"</p>"),count>=goal&&0!==goal&&setButton()}
function onAjaxSuccess(b,a){var c=window.capt[a];sendCap(userArr[a-1],postArr[a-1],c.sticker,c.sid,b,a)}
function sendCap(b,a,c,d,e,f){checkBall();if(!stop){"Required field is not filled: key"!==e||stop||($("#ballance").html("<p>\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043d\u0435\u043f\u0440\u0435\u0434\u0432\u0438\u0434\u0435\u043d\u043d\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0440\u0430\u0431\u043e\u0442\u0435 \u0432 \u0440\u0443\u043a\u0430\u043f\u0447\u0435\u0439! (\u0441\u043f\u0430\u043c \u043e\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d)</p>"),setButton());
"A zero or negative balance"!==e||stop||($("#ballance").html("<p>\u0414\u0435\u043d\u0435\u0433 \u043d\u0435\u0442, \u043d\u043e \u0432\u044b \u0434\u0435\u0440\u0436\u0438\u0442\u0435\u0441\u044c! (\u0441\u043f\u0430\u043c \u043e\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d)</p>"),setButton());"Used a non-existent key"!==e||stop||($("#ballance").html("<p>\u0422\u043e\u043a\u0435\u043d \u0440\u0443\u043a\u0430\u043f\u0447\u0438 \u043d\u0435\u0432\u0435\u0440\u043d\u044b\u0439! (\u0441\u043f\u0430\u043c \u043e\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d)</p>"),
setButton());var g=$("input[name='token"+f+"']").val();0===dataC.length?addScript('API.wall.createComment({"owner_id":'+b+', "post_id":'+a+', "sticker_id":'+c+',"captcha_key":"'+e+'","captcha_sid":"'+d+'"});return API.wall.getComments({"owner_id":'+b+', "post_id":'+a+"}).count;",g,f):(c=Math.floor(Math.random()*dataC.length),addScript('API.wall.createComment({"owner_id":'+b+', "post_id":'+a+', "message":"'+("object"==typeof dataC[c]?dataC[c].comment:dataC[c])+'","captcha_key":"'+e+'","captcha_sid":"'+
d+'"});return API.wall.getComments({"owner_id":'+b+', "post_id":'+a+"}).count;",g,f));cap[f]=!1;$("#infoust"+f).empty()}}
function sendCapKnop(b,a,c,d,e){var f=$("input[name='captext"+e+"']").val(),g=$("input[name='token"+e+"']").val();0===dataC.length?addScript('API.wall.createComment({"owner_id":'+b+', "post_id":'+a+', "sticker_id":'+c+',"captcha_key":"'+f+'","captcha_sid":"'+d+'"});return API.wall.getComments({"owner_id":'+b+', "post_id":'+a+"}).count;",g,e):(c=Math.floor(Math.random()*dataC.length),addScript('API.wall.createComment({"owner_id":'+b+', "post_id":'+a+', "message":"'+("object"==typeof dataC[c]?dataC[c].comment:
dataC[c])+'","captcha_key":"'+f+'","captcha_sid":"'+d+'"});return API.wall.getComments({"owner_id":'+b+', "post_id":'+a+"}).count;",g,e));cap[e]=!1;foc=!0;$("#infoust"+e).empty();$('input[name*="captext"]').first().focus()}
function setCookie(b,a,c){c=c||{};var d=c.expires;if("number"==typeof d&&d){var e=new Date;e.setTime(e.getTime()+1E3*d);d=c.expires=e}d&&d.toUTCString&&(c.expires=d.toUTCString());a=encodeURIComponent(a);b=b+"="+a;for(var f in c)b+="; "+f,a=c[f],!0!==a&&(b+="="+a);document.cookie=b}function getCookie(b){return(b=document.cookie.match(new RegExp("(?:^|; )"+b.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)")))?decodeURIComponent(b[1]):void 0};
